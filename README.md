# ChinaAreaInfo

中国行政区域信息爬虫 第三代重构版

#### 优化点

- 使用全新的 python 语言
- 优化 Id 字段 将 Id 的运用发挥到极致 只需要对 Id 添加索引就可以进行各种高性能的查询操作 无需其他字段
- 全新的递归逻辑 插入时记录 ParentsId 和 FullName
- 一次加载所有的发布日期 转化为字典
- 极大的减少了之前冗余臃肿的实体类对象 减少了文件与代码
- 增加数据库连接池 极大地提高了大批量数据库插入性能

#### 3.0 更新点

- 修复字节编码错误
- 优化网络交互开支
- 优化指数级运算增长的地址和父 id 的问题

#### 4.0 更新点

- 优化镜像的体积
- 增加 config.json 配置文件 便于爬虫的更多爬取选项

#### 5.0 更新点

- 全部变成异步函数
- 指定函数参数类型

### 6.0 更新点

- 超强纠错 没有读到数据再去请求一遍
- 移除 HTTP 连接限制

### 6.5 更新点

- 解决金门县在 2011、2012 年数据中的无效连接问题

### 6.9 更新点

- 解决天津红桥区大胡同街道下面没有数据的问题

### 7.0 更新点

- 增加异常报警

### 8.0 更新点

我觉得应该重构一下代码，就目前性能来看是不够的
因为模块与模块之间存在功能耦合

- 解耦 : 实现 http 模块与 read HTML 模块对异常结构的功能处理分离
- 错误问题:
  - 1 请求超时（2s）
  - 2 请求 404
  - 3 请求成功 页面不是正确的页面（暂时没有解决 只是增加了 2s 等待）
  - 4 请求成功 该页面下没有区域数据
- 解决方法:
  - 1 http 模块返回 null 说明链接不可用 跳过本次信息的读取
  - 2 http 返回的数据中 还有可能存在错误数据 应该放到 html 解析中判断
  - 4 14、15 年大胡同街道问题有 tr.villagehead 暂时没有遇见更奇葩的问题 如果有的话直接报异常就行
